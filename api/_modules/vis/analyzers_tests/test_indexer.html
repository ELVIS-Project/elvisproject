<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>vis.analyzers_tests.test_indexer &mdash; vis X documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     'X',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="vis X documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">vis X documentation</a> &raquo;</li>
          <li><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for vis.analyzers_tests.test_indexer</h1><div class="highlight"><pre>
<span class="c">#!/usr/bin/env python</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="c">#--------------------------------------------------------------------------------------------------</span>
<span class="c"># Program Name:           vis</span>
<span class="c"># Program Description:    Helps analyze music with computers.</span>
<span class="c">#</span>
<span class="c"># Filename:               controllers/indexer.py</span>
<span class="c"># Purpose:                Help with indexing data from musical scores.</span>
<span class="c">#</span>
<span class="c"># Copyright (C) 2013 Christopher Antila</span>
<span class="c">#</span>
<span class="c"># This program is free software: you can redistribute it and/or modify</span>
<span class="c"># it under the terms of the GNU Affero General Public License as</span>
<span class="c"># published by the Free Software Foundation, either version 3 of the</span>
<span class="c"># License, or (at your option) any later version.</span>
<span class="c">#</span>
<span class="c"># This program is distributed in the hope that it will be useful,</span>
<span class="c"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c"># GNU Affero General Public License for more details.</span>
<span class="c">#</span>
<span class="c"># You should have received a copy of the GNU Affero General Public License</span>
<span class="c"># along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="c">#--------------------------------------------------------------------------------------------------</span>

<span class="c"># allow &quot;no docstring&quot; for everything</span>
<span class="c"># pylint: disable=C0111</span>
<span class="c"># allow &quot;too many public methods&quot; for TestCase</span>
<span class="c"># pylint: disable=R0904</span>


<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">import</span> <span class="nn">mock</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">from</span> <span class="nn">music21</span> <span class="kn">import</span> <span class="n">base</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">note</span><span class="p">,</span> <span class="n">converter</span><span class="p">,</span> <span class="n">clef</span>
<span class="kn">from</span> <span class="nn">vis.analyzers</span> <span class="kn">import</span> <span class="n">indexer</span>
<span class="kn">from</span> <span class="nn">vis.test_corpus</span> <span class="kn">import</span> <span class="n">int_indexer_short</span>


<div class="viewcode-block" id="fake_indexer_func"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.fake_indexer_func">[docs]</a><span class="k">def</span> <span class="nf">fake_indexer_func</span><span class="p">(</span><span class="n">ecks</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">ecks</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="TestIndexerHardcore"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerHardcore">[docs]</a><span class="k">class</span> <span class="nc">TestIndexerHardcore</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="c"># accessing TestIndexer._indexer_func is part of the test</span>
    <span class="c"># pylint: disable=W0212</span>
<div class="viewcode-block" id="TestIndexerHardcore.test_indexer_hardcore_1"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerHardcore.test_indexer_hardcore_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_indexer_hardcore_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># That calling Indexer.__init__() with the wrong type results in the proper error message.</span>
        <span class="k">class</span> <span class="nc">TestIndexer</span><span class="p">(</span><span class="n">indexer</span><span class="o">.</span><span class="n">Indexer</span><span class="p">):</span>
            <span class="c"># Class with bare minimum changes, since we can&#39;t instantiate Indexer directly</span>
            <span class="n">required_score_type</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span>

        <span class="n">test_parts</span> <span class="o">=</span> <span class="p">[</span><span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">()]</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">,</span> <span class="n">TestIndexer</span><span class="p">,</span> <span class="n">test_parts</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span>
        <span class="n">error_msg</span> <span class="o">=</span> <span class="nb">unicode</span><span class="p">(</span><span class="s">&quot;&lt;class &#39;vis.analyzers_tests.test_indexer.TestIndexer&#39;&gt; requires &quot;</span>
                            <span class="s">&quot;&lt;class &#39;music21.stream.Stream&#39;&gt; objects, not &lt;class &#39;pandas.core&quot;</span>
                            <span class="s">&quot;.series.Series&#39;&gt;&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">TestIndexer</span><span class="p">(</span><span class="n">test_parts</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">err</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">error_msg</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestIndexerHardcore.test_indexer_hardcore_2"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerHardcore.test_indexer_hardcore_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_indexer_hardcore_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># That _do_multiprocessing() passes the correct arguments to stream_indexer()</span>
        <span class="k">class</span> <span class="nc">TestIndexer</span><span class="p">(</span><span class="n">indexer</span><span class="o">.</span><span class="n">Indexer</span><span class="p">):</span>
            <span class="c"># Class with bare minimum changes, since we can&#39;t instantiate Indexer directly</span>
            <span class="n">required_score_type</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span>
            <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_do_multiprocessing</span><span class="p">([[</span><span class="mi">0</span><span class="p">]])</span>
        <span class="c"># the actual testing</span>
        <span class="n">test_parts</span> <span class="o">=</span> <span class="p">[</span><span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()]</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c"># prepare mocks</span>
        <span class="k">with</span> <span class="n">mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s">u&#39;vis.analyzers.indexer.stream_indexer&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">mpi_mock</span><span class="p">:</span>
            <span class="c"># run test</span>
            <span class="n">t_ind</span> <span class="o">=</span> <span class="n">TestIndexer</span><span class="p">(</span><span class="n">test_parts</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span>
            <span class="n">t_ind</span><span class="o">.</span><span class="n">_indexer_func</span> <span class="o">=</span> <span class="n">fake_indexer_func</span>
            <span class="n">t_ind</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
            <span class="c"># check results</span>
            <span class="n">mpi_mock</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">test_parts</span><span class="p">,</span> <span class="n">fake_indexer_func</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestIndexerHardcore.test_indexer_hardcore_3"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerHardcore.test_indexer_hardcore_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_indexer_hardcore_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># when no &quot;types&quot; is specified, make sure it returns everything in the Stream</span>
        <span class="c"># TODO: this fails because of a bug in music21 that I reported here...</span>
        <span class="c"># https://groups.google.com/forum/#!topic/music21list/RGOupcvz5x8</span>
        <span class="c"># setup the input stream</span>
        <span class="n">the_stream</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
        <span class="n">the_stream</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s">u&#39;D#2&#39;</span><span class="p">,</span> <span class="n">quarterLength</span><span class="o">=</span><span class="mf">0.5</span><span class="p">))</span>
        <span class="n">the_stream</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">Rest</span><span class="p">(</span><span class="n">quarterLength</span><span class="o">=</span><span class="mf">0.5</span><span class="p">))</span>
        <span class="n">the_stream</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clef</span><span class="o">.</span><span class="n">TrebleClef</span><span class="p">())</span>
        <span class="c"># setup the expected Series</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">({</span><span class="mf">0.0</span><span class="p">:</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s">u&#39;D#2&#39;</span><span class="p">,</span> <span class="n">quarterLength</span><span class="o">=</span><span class="mf">0.5</span><span class="p">),</span>
                                  <span class="mf">0.5</span><span class="p">:</span> <span class="n">note</span><span class="o">.</span><span class="n">Rest</span><span class="p">(</span><span class="n">quarterLength</span><span class="o">=</span><span class="mf">0.5</span><span class="p">),</span>
                                  <span class="mf">1.0</span><span class="p">:</span> <span class="n">clef</span><span class="o">.</span><span class="n">TrebleClef</span><span class="p">()})</span>
        <span class="c"># run the test; verify results</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">stream_indexer</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="p">[</span><span class="n">the_stream</span><span class="p">],</span> <span class="n">verbatim_ser</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">actual</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">actual</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>

</div></div>
<div class="viewcode-block" id="verbatim"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.verbatim">[docs]</a><span class="k">def</span> <span class="nf">verbatim</span><span class="p">(</span><span class="n">iterable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the object contained in the first item of an iterable.</span>
<span class="sd">    :param iterable:</span>
<span class="sd">    :return iterable:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">iterable</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">obj</span>

</div>
<div class="viewcode-block" id="verbatim_ser"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.verbatim_ser">[docs]</a><span class="k">def</span> <span class="nf">verbatim_ser</span><span class="p">(</span><span class="n">iterable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the first item in an iterable</span>
<span class="sd">    :param iterable:</span>
<span class="sd">    :return: the first item</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">iterable</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

</div>
<div class="viewcode-block" id="verbatim_rests"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.verbatim_rests">[docs]</a><span class="k">def</span> <span class="nf">verbatim_rests</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="k">return</span> <span class="s">u&#39;Rest&#39;</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">note</span><span class="o">.</span><span class="n">Rest</span><span class="p">)</span> <span class="k">else</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">arg</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="verbatim_variable"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.verbatim_variable">[docs]</a><span class="k">def</span> <span class="nf">verbatim_variable</span><span class="p">(</span><span class="n">iterable</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">unicode</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">obj</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">))</span>


<span class="c"># Jamie: pylint says we have 8 instance attributes on this bad boy, which is just too many.</span>
<span class="c"># Christopher: pylint can shove it</span></div>
<div class="viewcode-block" id="IndexerTestBase"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.IndexerTestBase">[docs]</a><span class="k">class</span> <span class="nc">IndexerTestBase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="c"># pylint: disable=R0902</span>
<div class="viewcode-block" id="IndexerTestBase.setUp"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.IndexerTestBase.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># prepare a valid list of ElementWrappers (with proper offset and duration)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">in_series</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mf">0.25</span> <span class="o">*</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">100</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">in_stream</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">in_stream</span><span class="p">):</span>
            <span class="n">elem</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="mf">0.25</span>
            <span class="n">elem</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
        <span class="c"># prepare a valid list of Rests and ElementWrappers, happening simultaneously, to see that</span>
        <span class="c"># we can properly filter by type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mixed_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shared_mixed_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">mixed_series_data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">mixed_series_offsets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">mixed_series_rests</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">mixed_series_rests_offsets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">mixed_series_notes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">mixed_series_notes_offsets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
            <span class="n">app_me</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Rest</span><span class="p">(</span><span class="n">quarterLength</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>
            <span class="n">app_me</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="mf">0.5</span>
            <span class="n">mixed_series_offsets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">app_me</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
            <span class="n">mixed_series_rests_offsets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">app_me</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
            <span class="n">mixed_series_rests</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">u&#39;Rest&#39;</span><span class="p">)</span>
            <span class="n">mixed_series_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">u&#39;Rest&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mixed_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">app_me</span><span class="p">)</span>
            <span class="n">app_me</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">(</span><span class="nb">unicode</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="n">app_me</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="mf">0.25</span>
            <span class="n">app_me</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
            <span class="n">mixed_series_offsets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">app_me</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
            <span class="n">mixed_series_notes_offsets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">app_me</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
            <span class="n">mixed_series_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">unicode</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="n">mixed_series_notes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">unicode</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mixed_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">app_me</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mixed_series</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">mixed_series_data</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">mixed_series_offsets</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mixed_series_notes</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">mixed_series_notes</span><span class="p">,</span>
                                                <span class="n">index</span><span class="o">=</span><span class="n">mixed_series_notes_offsets</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mixed_series_rests</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">mixed_series_rests</span><span class="p">,</span>
                                                <span class="n">index</span><span class="o">=</span><span class="n">mixed_series_rests_offsets</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mixed_list</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mixed_list</span><span class="p">)</span>
        <span class="c"># same list as previous, but with a Rest and ElementerWrapper sharing each offset</span>
        <span class="n">s_m_series</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">s_m_series_offsets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">s_m_rests_series</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">s_m_rests_series_offsets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
            <span class="n">app_me</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Rest</span><span class="p">(</span><span class="n">quarterLength</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>
            <span class="n">app_me</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="mf">0.25</span>
            <span class="n">s_m_series_offsets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">app_me</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
            <span class="n">s_m_series</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">u&#39;Rest&#39;</span><span class="p">)</span>
            <span class="n">s_m_rests_series</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">u&#39;Rest&#39;</span><span class="p">)</span>
            <span class="n">s_m_rests_series_offsets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">app_me</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">shared_mixed_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">app_me</span><span class="p">)</span>
            <span class="n">app_me</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">app_me</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="mf">0.25</span>
            <span class="n">app_me</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
            <span class="n">s_m_series_offsets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">app_me</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
            <span class="n">s_m_series</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">unicode</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">shared_mixed_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">app_me</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shared_mixed_list</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shared_mixed_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shared_mixed_series</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">s_m_series</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">s_m_series_offsets</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shared_mixed_rests_series</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">s_m_rests_series</span><span class="p">,</span>
                                                       <span class="n">index</span><span class="o">=</span><span class="n">s_m_rests_series_offsets</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="TestIndexerSinglePart"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerSinglePart">[docs]</a><span class="k">class</span> <span class="nc">TestIndexerSinglePart</span><span class="p">(</span><span class="n">IndexerTestBase</span><span class="p">):</span>
<div class="viewcode-block" id="TestIndexerSinglePart.test_series_indexer"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerSinglePart.test_series_indexer">[docs]</a>    <span class="k">def</span> <span class="nf">test_series_indexer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">result_uniform</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">series_indexer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">in_series</span><span class="p">],</span> <span class="n">verbatim_ser</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="c"># that we get a Series back when a Series is given</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">result_uniform</span><span class="p">),</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="c"># the verbatim_ser function is designed to produce exactly what is given</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertSequenceEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">result_uniform</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">in_series</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertSequenceEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">result_uniform</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">in_series</span><span class="p">))</span>
        <span class="n">result_mixed</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">series_indexer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mixed_series</span><span class="p">],</span> <span class="n">verbatim_ser</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="c"># that a list with two types is not filtered when it&#39;s given as a Series</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mixed_series</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">result_mixed</span><span class="p">))</span>
        <span class="n">expect_mixed</span> <span class="o">=</span> <span class="p">[</span><span class="s">u&#39;Rest&#39;</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">elt</span><span class="p">,</span> <span class="n">note</span><span class="o">.</span><span class="n">Rest</span><span class="p">)</span> <span class="k">else</span> <span class="n">elt</span><span class="o">.</span><span class="n">obj</span>
                        <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mixed_list</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertSequenceEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">expect_mixed</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="n">result_mixed</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestIndexerSinglePart.test_stream_indexer"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerSinglePart.test_stream_indexer">[docs]</a>    <span class="k">def</span> <span class="nf">test_stream_indexer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">stream_indexer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">in_stream</span><span class="p">],</span> <span class="n">verbatim</span><span class="p">,</span> <span class="p">[</span><span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">])[</span><span class="mi">1</span><span class="p">]</span>
        <span class="c"># that we get a Series back when a Stream is given</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">)</span>
        <span class="c"># the verbatim function is designed to produce exactly what is given</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">in_stream</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertSequenceEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="p">[</span><span class="n">elt</span><span class="o">.</span><span class="n">obj</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">in_stream</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestIndexerSinglePart.test_mp_indexer_8"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerSinglePart.test_mp_indexer_8">[docs]</a>    <span class="k">def</span> <span class="nf">test_mp_indexer_8</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># that a list with two types is properly filtered when it&#39;s given as a Stream</span>
        <span class="c"># --&gt; test lengths</span>
        <span class="c"># --&gt; one event at each offset</span>
        <span class="c"># input_stream = stream.Stream(self.mixed_list)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">stream_indexer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">in_stream</span><span class="p">],</span>
                                        <span class="n">verbatim</span><span class="p">,</span> <span class="p">[</span><span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">])[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">in_series</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestIndexerSinglePart.test_mp_indexer_10"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerSinglePart.test_mp_indexer_10">[docs]</a>    <span class="k">def</span> <span class="nf">test_mp_indexer_10</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># that a list with two types is properly filtered when it&#39;s given as a Stream</span>
        <span class="c"># --&gt; test values</span>
        <span class="c"># --&gt; one event at each offset</span>
        <span class="n">result</span> <span class="o">=</span> \
            <span class="n">indexer</span><span class="o">.</span><span class="n">stream_indexer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mixed_list</span><span class="p">],</span> <span class="n">verbatim</span><span class="p">,</span> <span class="p">[</span><span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">])[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mixed_series_notes</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mixed_series_notes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestIndexerSinglePart.test_mp_indexer_10_pickle"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerSinglePart.test_mp_indexer_10_pickle">[docs]</a>    <span class="k">def</span> <span class="nf">test_mp_indexer_10_pickle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># that a list with two types is properly filtered when it&#39;s given as a Stream</span>
        <span class="c"># ** inputted Streams are pickled</span>
        <span class="c"># --&gt; test values</span>
        <span class="c"># --&gt; one event at each offset</span>
        <span class="n">input_stream</span> <span class="o">=</span> <span class="n">converter</span><span class="o">.</span><span class="n">freeze</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mixed_list</span><span class="p">),</span> <span class="s">u&#39;pickle&#39;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">stream_indexer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="n">input_stream</span><span class="p">],</span> <span class="n">verbatim</span><span class="p">,</span> <span class="p">[</span><span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">])[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mixed_series_notes</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mixed_series_notes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestIndexerSinglePart.test_mp_indexer_12"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerSinglePart.test_mp_indexer_12">[docs]</a>    <span class="k">def</span> <span class="nf">test_mp_indexer_12</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># that a list with two types is properly filtered when it&#39;s given as a Stream</span>
        <span class="c"># --&gt; test lengths</span>
        <span class="c"># --&gt; two events at each offset</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">stream_indexer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">in_stream</span><span class="p">],</span>
                                        <span class="n">verbatim</span><span class="p">,</span> <span class="p">[</span><span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">])[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">in_series</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestIndexerSinglePart.test_mp_indexer_12a"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerSinglePart.test_mp_indexer_12a">[docs]</a>    <span class="k">def</span> <span class="nf">test_mp_indexer_12a</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># that a list with two types is properly filtered when it&#39;s given as a Stream</span>
        <span class="c"># --&gt; test lengths</span>
        <span class="c"># --&gt; two events at each offset</span>
        <span class="c"># --&gt; if we want ElementWrappers and Rests</span>
        <span class="c"># (we should only get the &quot;first&quot; events)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">stream_indexer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">shared_mixed_list</span><span class="p">],</span>
                                        <span class="n">verbatim_rests</span><span class="p">,</span>
                                        <span class="p">[</span><span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">,</span> <span class="n">note</span><span class="o">.</span><span class="n">Rest</span><span class="p">])[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shared_mixed_rests_series</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>

    <span class="c"># def test_mp_indexer_13(self):  # TODO: fails pending implementation of MultiIndex</span>
    <span class="c">#     # that a list with two types is not filtered when it&#39;s given as a Series, even if there&#39;s</span>
    <span class="c">#     # a value for the &quot;types&quot; parameter</span>
    <span class="c">#     # --&gt; test lengths</span>
    <span class="c">#     # --&gt; two events at each offset</span>
    <span class="c">#     result = indexer.series_indexer(0, [self.shared_mixed_series], verbatim_rests)[1]</span>
    <span class="c">#     self.assertEqual(len(self.shared_mixed_series), len(result))</span>

    <span class="c"># def test_mp_indexer_14a(self):  # TODO: fails pending implementation of MultiIndex</span>
    <span class="c">#     # that a list with two types is properly filtered when it&#39;s given as a Stream</span>
    <span class="c">#     # --&gt; test values</span>
    <span class="c">#     # --&gt; two events at each offset</span>
    <span class="c">#     # --&gt; if we want ElementWrappers and Rests</span>
    <span class="c">#     result = indexer.stream_indexer(0, [self.shared_mixed_list],</span>
    <span class="c">#                                      verbatim_rests,</span>
    <span class="c">#                                      [base.ElementWrapper, note.Rest])[1]</span>
    <span class="c">#     for i in self.shared_mixed_series.index:</span>
    <span class="c">#         self.assertEqual(result[i], pandas.Series([u&#39;Rest&#39;, unicode(i)], index=[i, i]))</span>

    <span class="c"># def test_mp_indexer_15(self):  # TODO: fails pending implementation of MultiIndex</span>
    <span class="c">#     # that a list with two types is not filtered when it&#39;s given as a Series,</span>
    <span class="c">#     # even if there&#39;s a value for the &quot;types&quot; parameter</span>
    <span class="c">#     # --&gt; test values</span>
    <span class="c">#     # --&gt; two events at each offset</span>
    <span class="c">#     result = indexer.series_indexer(0, [self.shared_mixed_series], verbatim_rests)[1]</span>
    <span class="c">#     for i in self.shared_mixed_series.index:</span>
    <span class="c">#         self.assertEqual(result[i], pandas.Series([u&#39;Rest&#39;, unicode(i)], index=[i, i]))</span>
</div>
<div class="viewcode-block" id="TestIndexerSinglePart.test_mp_indexer_14"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerSinglePart.test_mp_indexer_14">[docs]</a>    <span class="k">def</span> <span class="nf">test_mp_indexer_14</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># that a list with two types is properly filtered when it&#39;s given as a Stream</span>
        <span class="c"># --&gt; test values</span>
        <span class="c"># --&gt; two events at each offset</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">stream_indexer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">shared_mixed_list</span><span class="p">],</span>
                                        <span class="n">verbatim</span><span class="p">,</span>
                                        <span class="p">[</span><span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">])[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">in_stream</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">in_series</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

</div></div>
<div class="viewcode-block" id="TestIndexerMultiEvent"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerMultiEvent">[docs]</a><span class="k">class</span> <span class="nc">TestIndexerMultiEvent</span><span class="p">(</span><span class="n">IndexerTestBase</span><span class="p">):</span>
    <span class="c"># Testing that, if there are many events at an offset, only the &quot;first&quot; one is outputted.</span>
<div class="viewcode-block" id="TestIndexerMultiEvent.setUp"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerMultiEvent.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TestIndexerMultiEvent</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">test_series</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">in_series</span><span class="p">,</span>
                            <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">in_series</span><span class="p">),</span>
                            <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">in_series</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">test_streams</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">in_stream</span><span class="p">,</span>
                             <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">in_stream</span><span class="p">),</span>
                             <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">in_stream</span><span class="p">)]</span>
</div>
<div class="viewcode-block" id="TestIndexerMultiEvent.test_multi_event_1"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerMultiEvent.test_multi_event_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_multi_event_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Test this:</span>
        <span class="c"># offset:  0.0  |  0.5  |  1.0  |  1.5  |  2.0</span>
        <span class="c"># part 1:  [0]  |  [1]  |  [2]  |  [3]  |  [4]</span>
        <span class="c"># part 2:  [0]  |  [1]  |  [2]  |  [3]  |  [4]</span>
        <span class="n">part_1</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">i</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="n">part_1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">part_2</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">i</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="n">part_2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">({</span><span class="mf">0.0</span><span class="p">:</span> <span class="s">u&#39;(0, 0)&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">:</span> <span class="s">u&#39;(1, 1)&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">:</span> <span class="s">u&#39;(2, 2)&#39;</span><span class="p">,</span>
                                  <span class="mf">1.5</span><span class="p">:</span> <span class="s">u&#39;(3, 3)&#39;</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">:</span> <span class="s">u&#39;(4, 4)&#39;</span><span class="p">})</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">stream_indexer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="n">part_1</span><span class="p">,</span> <span class="n">part_2</span><span class="p">],</span> <span class="n">verbatim_variable</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertSequenceEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">expected</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertSequenceEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestIndexerMultiEvent.test_multi_event_2"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerMultiEvent.test_multi_event_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_multi_event_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Test this:</span>
        <span class="c"># offset:  0.0  |  0.5     |  1.0     |  1.5     |  2.0</span>
        <span class="c"># part 1:  [1]  |  [2][6]  |  [3]     |  [4][7]  |  [5][8]</span>
        <span class="c"># part 2:  [1]  |  [2][6]  |  [3][7]  |  [4]     |  [5][8]</span>
        <span class="n">part_1</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">i</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="n">part_1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">part_2</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">i</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="n">part_2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">add_these</span> <span class="o">=</span> <span class="p">[(</span><span class="n">part_1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="n">part_1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="p">(</span><span class="n">part_1</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
                     <span class="p">(</span><span class="n">part_2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="n">part_2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="p">(</span><span class="n">part_2</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mi">8</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">part</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">add_these</span><span class="p">:</span>
            <span class="n">zed</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
            <span class="n">zed</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="n">part</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">zed</span><span class="p">)</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">({</span><span class="mf">0.0</span><span class="p">:</span> <span class="s">u&#39;(0, 0)&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">:</span> <span class="s">u&#39;(1, 1)&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">:</span> <span class="s">u&#39;(2, 2)&#39;</span><span class="p">,</span>
                                  <span class="mf">1.5</span><span class="p">:</span> <span class="s">u&#39;(3, 3)&#39;</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">:</span> <span class="s">u&#39;(4, 4)&#39;</span><span class="p">})</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">stream_indexer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="n">part_1</span><span class="p">,</span> <span class="n">part_2</span><span class="p">],</span> <span class="n">verbatim_variable</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertSequenceEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">expected</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertSequenceEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestIndexerMultiEvent.test_multi_event_3"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestIndexerMultiEvent.test_multi_event_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_multi_event_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">## offset:  0.0  |  0.5     |  1.0        |  1.5     |  2.0</span>
        <span class="c">## part 1:  [1]  |  [2][6]  |  [3][7][8]  |  [4][9]  |  [5][10][11]</span>
        <span class="c">## part 2:  [1]  |  [2][6]  |  [3][7]     |  [4]     |  [5]</span>
        <span class="c">## part 3:  [1]  |  [2][6]  |  [3][7]     |  [4][8]  |  [5][9]</span>
        <span class="n">part_1</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">i</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="n">part_1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">part_2</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">i</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="n">part_2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">part_3</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">i</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="n">part_3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">add_these</span> <span class="o">=</span> <span class="p">[(</span><span class="n">part_1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="n">part_1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="p">(</span><span class="n">part_1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="p">(</span><span class="n">part_1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
                     <span class="p">(</span><span class="n">part_1</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="n">part_1</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>
                     <span class="p">(</span><span class="n">part_2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="n">part_2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                     <span class="p">(</span><span class="n">part_3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="n">part_3</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="p">(</span><span class="n">part_3</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="p">(</span><span class="n">part_3</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mi">9</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">part</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">add_these</span><span class="p">:</span>
            <span class="n">zed</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">ElementWrapper</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
            <span class="n">zed</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="n">part</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">zed</span><span class="p">)</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">({</span><span class="mf">0.0</span><span class="p">:</span> <span class="s">u&#39;(0, 0)&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">:</span> <span class="s">u&#39;(1, 1)&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">:</span> <span class="s">u&#39;(2, 2)&#39;</span><span class="p">,</span>
                                  <span class="mf">1.5</span><span class="p">:</span> <span class="s">u&#39;(3, 3)&#39;</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">:</span> <span class="s">u&#39;(4, 4)&#39;</span><span class="p">})</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">stream_indexer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="n">part_1</span><span class="p">,</span> <span class="n">part_2</span><span class="p">],</span> <span class="n">verbatim_variable</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertSequenceEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">expected</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertSequenceEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>

</div></div>
<div class="viewcode-block" id="TestMpiUniqueOffsets"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiUniqueOffsets">[docs]</a><span class="k">class</span> <span class="nc">TestMpiUniqueOffsets</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="TestMpiUniqueOffsets.test_mpi_unique_offsets_1"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiUniqueOffsets.test_mpi_unique_offsets_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_unique_offsets_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="n">int_indexer_short</span><span class="o">.</span><span class="n">test_1</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_unique_offsets</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiUniqueOffsets.test_mpi_unique_offsets_2"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiUniqueOffsets.test_mpi_unique_offsets_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_unique_offsets_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="n">int_indexer_short</span><span class="o">.</span><span class="n">test_2</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_unique_offsets</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiUniqueOffsets.test_mpi_unique_offsets_3"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiUniqueOffsets.test_mpi_unique_offsets_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_unique_offsets_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="n">int_indexer_short</span><span class="o">.</span><span class="n">test_3</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_unique_offsets</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiUniqueOffsets.test_mpi_unique_offsets_4"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiUniqueOffsets.test_mpi_unique_offsets_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_unique_offsets_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="n">int_indexer_short</span><span class="o">.</span><span class="n">test_4</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_unique_offsets</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiUniqueOffsets.test_mpi_unique_offsets_5"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiUniqueOffsets.test_mpi_unique_offsets_5">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_unique_offsets_5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="n">int_indexer_short</span><span class="o">.</span><span class="n">test_5</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_unique_offsets</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiUniqueOffsets.test_mpi_unique_offsets_6"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiUniqueOffsets.test_mpi_unique_offsets_6">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_unique_offsets_6</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="n">int_indexer_short</span><span class="o">.</span><span class="n">test_6</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_unique_offsets</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiUniqueOffsets.test_mpi_unique_offsets_7"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiUniqueOffsets.test_mpi_unique_offsets_7">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_unique_offsets_7</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="n">int_indexer_short</span><span class="o">.</span><span class="n">test_7</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_unique_offsets</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiUniqueOffsets.test_mpi_unique_offsets_8"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiUniqueOffsets.test_mpi_unique_offsets_8">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_unique_offsets_8</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="n">int_indexer_short</span><span class="o">.</span><span class="n">test_8</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_unique_offsets</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiUniqueOffsets.test_mpi_unique_offsets_9"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiUniqueOffsets.test_mpi_unique_offsets_9">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_unique_offsets_9</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="n">int_indexer_short</span><span class="o">.</span><span class="n">test_9</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_unique_offsets</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiUniqueOffsets.test_mpi_unique_offsets_10"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiUniqueOffsets.test_mpi_unique_offsets_10">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_unique_offsets_10</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="n">int_indexer_short</span><span class="o">.</span><span class="n">test_10</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_unique_offsets</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiUniqueOffsets.test_mpi_unique_offsets_12"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiUniqueOffsets.test_mpi_unique_offsets_12">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_unique_offsets_12</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="n">int_indexer_short</span><span class="o">.</span><span class="n">test_12</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_unique_offsets</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiUniqueOffsets.test_mpi_unique_offsets_13"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiUniqueOffsets.test_mpi_unique_offsets_13">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_unique_offsets_13</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="n">int_indexer_short</span><span class="o">.</span><span class="n">test_13</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.125</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.375</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_unique_offsets</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiUniqueOffsets.test_mpi_unique_offsets_14"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiUniqueOffsets.test_mpi_unique_offsets_14">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_unique_offsets_14</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="n">int_indexer_short</span><span class="o">.</span><span class="n">test_14</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0625</span><span class="p">,</span> <span class="mf">0.125</span><span class="p">,</span> <span class="mf">0.1875</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.3125</span><span class="p">,</span> <span class="mf">0.375</span><span class="p">,</span> <span class="mf">0.4375</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_unique_offsets</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiUniqueOffsets.test_mpi_unique_offsets_15"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiUniqueOffsets.test_mpi_unique_offsets_15">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_unique_offsets_15</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="n">int_indexer_short</span><span class="o">.</span><span class="n">test_15</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_unique_offsets</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiUniqueOffsets.test_mpi_unique_offsets_16"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiUniqueOffsets.test_mpi_unique_offsets_16">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_unique_offsets_16</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="n">int_indexer_short</span><span class="o">.</span><span class="n">test_16</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">1.25</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_unique_offsets</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiUniqueOffsets.test_mpi_unique_offsets_17"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiUniqueOffsets.test_mpi_unique_offsets_17">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_unique_offsets_17</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="n">int_indexer_short</span><span class="o">.</span><span class="n">test_17</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">1.125</span><span class="p">,</span> <span class="mf">1.25</span><span class="p">,</span> <span class="mf">1.375</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_unique_offsets</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="TestMpiVertAligner"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiVertAligner">[docs]</a><span class="k">class</span> <span class="nc">TestMpiVertAligner</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="TestMpiVertAligner.test_mpi_vert_aligner_1"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiVertAligner.test_mpi_vert_aligner_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_vert_aligner_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">in_list</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_vert_aligner</span><span class="p">(</span><span class="n">in_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiVertAligner.test_mpi_vert_aligner_2"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiVertAligner.test_mpi_vert_aligner_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_vert_aligner_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">in_list</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_vert_aligner</span><span class="p">(</span><span class="n">in_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiVertAligner.test_mpi_vert_aligner_3"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiVertAligner.test_mpi_vert_aligner_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_vert_aligner_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">in_list</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_vert_aligner</span><span class="p">(</span><span class="n">in_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiVertAligner.test_mpi_vert_aligner_4"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiVertAligner.test_mpi_vert_aligner_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_vert_aligner_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">in_list</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_vert_aligner</span><span class="p">(</span><span class="n">in_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiVertAligner.test_mpi_vert_aligner_5"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiVertAligner.test_mpi_vert_aligner_5">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_vert_aligner_5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">in_list</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">]]</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_vert_aligner</span><span class="p">(</span><span class="n">in_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiVertAligner.test_mpi_vert_aligner_6"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiVertAligner.test_mpi_vert_aligner_6">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_vert_aligner_6</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">in_list</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_vert_aligner</span><span class="p">(</span><span class="n">in_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiVertAligner.test_mpi_vert_aligner_7"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiVertAligner.test_mpi_vert_aligner_7">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_vert_aligner_7</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">in_list</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_vert_aligner</span><span class="p">(</span><span class="n">in_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiVertAligner.test_mpi_vert_aligner_8"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiVertAligner.test_mpi_vert_aligner_8">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_vert_aligner_8</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">in_list</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_vert_aligner</span><span class="p">(</span><span class="n">in_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMpiVertAligner.test_mpi_vert_aligner_9"><a class="viewcode-back" href="../../../vis.analyzers_tests.html#vis.analyzers_tests.test_indexer.TestMpiVertAligner.test_mpi_vert_aligner_9">[docs]</a>    <span class="k">def</span> <span class="nf">test_mpi_vert_aligner_9</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">in_list</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">mpi_vert_aligner</span><span class="p">(</span><span class="n">in_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>

<span class="c">#--------------------------------------------------------------------------------------------------#</span>
<span class="c"># Definitions                                                                                      #</span>
<span class="c">#--------------------------------------------------------------------------------------------------#</span></div></div>
<span class="n">INDEXER_1_PART_SUITE</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestLoader</span><span class="p">()</span><span class="o">.</span><span class="n">loadTestsFromTestCase</span><span class="p">(</span><span class="n">TestIndexerSinglePart</span><span class="p">)</span>
<span class="n">INDEXER_MULTI_EVENT_SUITE</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestLoader</span><span class="p">()</span><span class="o">.</span><span class="n">loadTestsFromTestCase</span><span class="p">(</span><span class="n">TestIndexerMultiEvent</span><span class="p">)</span>
<span class="n">UNIQUE_OFFSETS_SUITE</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestLoader</span><span class="p">()</span><span class="o">.</span><span class="n">loadTestsFromTestCase</span><span class="p">(</span><span class="n">TestMpiUniqueOffsets</span><span class="p">)</span>
<span class="n">VERT_ALIGNER_SUITE</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestLoader</span><span class="p">()</span><span class="o">.</span><span class="n">loadTestsFromTestCase</span><span class="p">(</span><span class="n">TestMpiVertAligner</span><span class="p">)</span>
<span class="n">INDEXER_HARDCORE_SUITE</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestLoader</span><span class="p">()</span><span class="o">.</span><span class="n">loadTestsFromTestCase</span><span class="p">(</span><span class="n">TestIndexerHardcore</span><span class="p">)</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">vis X documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Christopher Antila.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b2.
    </div>
  </body>
</html>